
<% @currentPrefectureStatistic = current_prefecture_statistic %>
<% @statistic_per_gender_data = statistic_by_gender @currentPrefectureStatistic %>
<% @statistic_per_age_data = statistic_by_age @currentPrefectureStatistic %>
<div class="h-auto p-2 lg:p-4 mb-4 bg-white shadow-lg flex-col lg:flex lg:flex-row">
    <div class="w-full lg:w-1/5 p-2 rounded overflow-hidden text-left flex justify-center">
        <div class="text-gray-700 text-xl p-4">
            <p class="font-bold">
                <%= @currentPrefectureStatistic.name %> reports
            </p>
            <p class="text-base font-bold text-4xl mr-4 ml-4 mt-4">
                <%= number_with_precision(@currentPrefectureStatistic.total_count, :precision => 0, :delimiter => ',') %>
            </p>
            <p class="text-sm text-right mr-2">cases</p>
        </div>
    </div>
    <div class="w-auto lg:w-2/5 p-2 mb-2 lg:mr-2 lg:mb-2 lg:mt-2 rounded overflow-hidden border-dotted border-2 border-gray-500">
        <p class="font-bold">By gender</p>
        <canvas id="statisticPerGenderData"></canvas>
    </div>
    <div class="w-auto lg:w-2/5 p-2 lg:mr-2 lg:mb-2 lg:mt-2 rounded overflow-hidden border-dotted border-2 border-gray-500">
        <p class="font-bold"> By age</p>
        <canvas id="statisticPerAgeData"></canvas>
    </div>
</div>
<%= content_tag :div,
    id: "statistic_per_gender_data",
    data: @statistic_per_gender_data.to_json do %>
<% end %>
<%= content_tag :div,
    id: "statistic_per_age_data",
    data: @statistic_per_age_data.to_json do %>
<% end %>

<%= javascript_pack_tag 'statistic_per_gender', 'data-turbolinks-track': 'reload' %>
<%= javascript_pack_tag 'statistic_per_age', 'data-turbolinks-track': 'reload' %>
